var te=Object.defineProperty,ne=Object.defineProperties;var le=Object.getOwnPropertyDescriptors;var C=Object.getOwnPropertySymbols;var oe=Object.prototype.hasOwnProperty,se=Object.prototype.propertyIsEnumerable;var Q=(n,e,t)=>e in n?te(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,U=(n,e)=>{for(var t in e||(e={}))oe.call(e,t)&&Q(n,t,e[t]);if(C)for(var t of C(e))se.call(e,t)&&Q(n,t,e[t]);return n},z=(n,e)=>ne(n,le(e));import{S as W,i as X,s as Y,e as O,c as v,a as w,d as y,b,g as T,n as N,M as re,w as ie,N as M,k as Z,m as x,H as E,O as B,P as A,Q as P,r as q,l as R,p as S,q as D,R as F,T as ce,t as ae,h as ue,o as V,E as j,U as fe,x as he,y as _e,z as de,V as pe,C as me}from"../chunks/index-60f3b73a.js";function ge(n){let e,t;return{c(){e=O("span"),this.h()},l(s){e=v(s,"SPAN",{class:!0,style:!0}),w(e).forEach(y),this.h()},h(){b(e,"class",n[1]),b(e,"style",t=n[0]?"border: none; outline: none; box-shadow: none;":"")},m(s,_){T(s,e,_),n[15](e)},p(s,[_]){_&2&&b(e,"class",s[1]),_&1&&t!==(t=s[0]?"border: none; outline: none; box-shadow: none;":"")&&b(e,"style",t)},i:N,o:N,d(s){s&&y(e),n[15](null)}}}function be(n,e,t){let s;const _=re();let d,{autofocus:u=!1}=e,{latex:p}=e,{noBorderOutline:c=!1}=e,{class:i=""}=e,{config:g={}}=e,l;const o=()=>l==null?void 0:l.focus(),a=()=>l==null?void 0:l.blur(),r=()=>l==null?void 0:l.reflow(),f=()=>l==null?void 0:l.select(),h=()=>l==null?void 0:l.clearSelection(),k=m=>l==null?void 0:l.keystroke(m),I=m=>l==null?void 0:l.typedText(m);ie(()=>{const m=globalThis.MathQuill.getInterface(2);t(13,l=m.MathField(d,z(U({},s),{handlers:{edit(){p==""&&l.latex()==""&&_("delete"),_("edit",l.latex()),t(3,p=l.latex())},upOutOf(){_("upOutOf")},moveOutOf(){_("moveOutOf")},enter(){_("enter")}}}))),u&&l.focus()});function $(m){M[m?"unshift":"push"](()=>{d=m,t(2,d)})}return n.$$set=m=>{"autofocus"in m&&t(4,u=m.autofocus),"latex"in m&&t(3,p=m.latex),"noBorderOutline"in m&&t(0,c=m.noBorderOutline),"class"in m&&t(1,i=m.class),"config"in m&&t(5,g=m.config)},n.$$.update=()=>{n.$$.dirty&32&&t(14,s=Object.fromEntries(Object.entries(g).filter(([m,ee])=>ee))),n.$$.dirty&8200&&l&&l.latex()!==p&&l.latex(p),n.$$.dirty&24608&&s&&l&&l.config(g)},[c,i,d,p,u,g,o,a,r,f,h,k,I,l,s,$]}class ye extends W{constructor(e){super(),X(this,e,be,ge,Y,{autofocus:4,latex:3,noBorderOutline:0,class:1,config:5,focus:6,blur:7,reflow:8,select:9,clearSelection:10,keystroke:11,typedText:12})}get focus(){return this.$$.ctx[6]}get blur(){return this.$$.ctx[7]}get reflow(){return this.$$.ctx[8]}get select(){return this.$$.ctx[9]}get clearSelection(){return this.$$.ctx[10]}get keystroke(){return this.$$.ctx[11]}get typedText(){return this.$$.ctx[12]}}const H=n=>{document.activeElement!==n&&n.focus()};function G(n,e,t){const s=n.slice();return s[8]=e[t],s[9]=e,s[10]=t,s}function J(n,e,t){const s=n.slice();return s[11]=e[t],s[12]=e,s[13]=t,s}function ke(n){let e,t,s=n[12],_=n[13],d,u,p;const c=()=>n[4](t,s,_),i=()=>n[4](null,s,_);function g(r){n[5](r,n[11])}function l(){return n[6](n[8],n[9],n[10],n[13])}function o(){return n[7](n[8],n[13],n[9],n[10])}let a={config:{autoCommands:"theta sqrt sum pi prod",autoOperatorNames:"sin cos tan arcsin arccos arctan"}};return n[11].content!==void 0&&(a.latex=n[11].content),t=new ye({props:a}),c(),M.push(()=>fe(t,"latex",g)),t.$on("enter",l),t.$on("delete",o),{c(){e=O("div"),he(t.$$.fragment),u=O("br"),this.h()},l(r){e=v(r,"DIV",{class:!0});var f=w(e);_e(t.$$.fragment,f),u=v(f,"BR",{}),f.forEach(y),this.h()},h(){b(e,"class","mb-4")},m(r,f){T(r,e,f),de(t,e,null),E(e,u),p=!0},p(r,f){n=r,(s!==n[12]||_!==n[13])&&(i(),s=n[12],_=n[13],c());const h={};!d&&f&1&&(d=!0,h.latex=n[11].content,pe(()=>d=!1)),t.$set(h)},i(r){p||(q(t.$$.fragment,r),p=!0)},o(r){S(t.$$.fragment,r),p=!1},d(r){r&&y(e),i(),me(t)}}}function Oe(n){let e,t,s;function _(){n[3].call(e,n[12],n[13])}return{c(){e=O("input"),this.h()},l(d){e=v(d,"INPUT",{placeholder:!0}),this.h()},h(){b(e,"placeholder","Enter text...")},m(d,u){T(d,e,u),B(e,n[11].content),t||(s=P(e,"input",_),t=!0)},p(d,u){n=d,u&1&&e.value!==n[11].content&&B(e,n[11].content)},i:N,o:N,d(d){d&&y(e),t=!1,s()}}}function K(n){let e,t,s,_;const d=[Oe,ke],u=[];function p(c,i){return c[11].type=="text"?0:c[11].type=="math"?1:-1}return~(e=p(n))&&(t=u[e]=d[e](n)),{c(){t&&t.c(),s=R()},l(c){t&&t.l(c),s=R()},m(c,i){~e&&u[e].m(c,i),T(c,s,i),_=!0},p(c,i){let g=e;e=p(c),e===g?~e&&u[e].p(c,i):(t&&(V(),S(u[g],1,1,()=>{u[g]=null}),D()),~e?(t=u[e],t?t.p(c,i):(t=u[e]=d[e](c),t.c()),q(t,1),t.m(s.parentNode,s)):t=null)},i(c){_||(q(t),_=!0)},o(c){S(t),_=!1},d(c){~e&&u[e].d(c),c&&y(s)}}}function L(n){let e,t,s,_,d,u,p,c,i;function g(){n[2].call(t,n[9],n[10])}let l=n[8].pieces,o=[];for(let r=0;r<l.length;r+=1)o[r]=K(J(n,l,r));const a=r=>S(o[r],1,1,()=>{o[r]=null});return{c(){e=O("div"),t=O("input"),d=Z(),u=O("div");for(let r=0;r<o.length;r+=1)o[r].c();this.h()},l(r){e=v(r,"DIV",{class:!0});var f=w(e);t=v(f,"INPUT",{placeholder:!0,class:!0}),d=x(f),u=v(f,"DIV",{class:!0});var h=w(u);for(let k=0;k<o.length;k+=1)o[k].l(h);h.forEach(y),f.forEach(y),this.h()},h(){b(t,"placeholder","Section Name"),b(t,"class","text-bold text-lg"),b(u,"class","border-l border-gray-300 p-4"),b(e,"class","block")},m(r,f){T(r,e,f),E(e,t),B(t,n[8].name),E(e,d),E(e,u);for(let h=0;h<o.length;h+=1)o[h].m(u,null);p=!0,c||(i=[A(s=H.call(null,t)),P(t,"input",g),A(_=H.call(null,t))],c=!0)},p(r,f){if(n=r,f&1&&t.value!==n[8].name&&B(t,n[8].name),f&1){l=n[8].pieces;let h;for(h=0;h<l.length;h+=1){const k=J(n,l,h);o[h]?(o[h].p(k,f),q(o[h],1)):(o[h]=K(k),o[h].c(),q(o[h],1),o[h].m(u,null))}for(V(),h=l.length;h<o.length;h+=1)a(h);D()}},i(r){if(!p){for(let f=0;f<l.length;f+=1)q(o[f]);p=!0}},o(r){o=o.filter(Boolean);for(let f=0;f<o.length;f+=1)S(o[f]);p=!1},d(r){r&&y(e),F(o,r),c=!1,ce(i)}}}function ve(n){let e,t,s,_,d,u,p,c=n[0],i=[];for(let l=0;l<c.length;l+=1)i[l]=L(G(n,c,l));const g=l=>S(i[l],1,1,()=>{i[l]=null});return{c(){e=O("div");for(let l=0;l<i.length;l+=1)i[l].c();t=Z(),s=O("button"),_=ae("Add Section"),this.h()},l(l){e=v(l,"DIV",{class:!0});var o=w(e);for(let r=0;r<i.length;r+=1)i[r].l(o);t=x(o),s=v(o,"BUTTON",{class:!0});var a=w(s);_=ue(a,"Add Section"),a.forEach(y),o.forEach(y),this.h()},h(){b(s,"class","print:hidden mt-4 px-4 py-2 rounded-full border border-black"),b(e,"class","m-8")},m(l,o){T(l,e,o);for(let a=0;a<i.length;a+=1)i[a].m(e,null);E(e,t),E(e,s),E(s,_),d=!0,u||(p=P(s,"click",n[1]),u=!0)},p(l,[o]){if(o&1){c=l[0];let a;for(a=0;a<c.length;a+=1){const r=G(l,c,a);i[a]?(i[a].p(r,o),q(i[a],1)):(i[a]=L(r),i[a].c(),q(i[a],1),i[a].m(e,t))}for(V(),a=c.length;a<i.length;a+=1)g(a);D()}},i(l){if(!d){for(let o=0;o<c.length;o+=1)q(i[o]);d=!0}},o(l){i=i.filter(Boolean);for(let o=0;o<i.length;o+=1)S(i[o]);d=!1},d(l){l&&y(e),F(i,l),u=!1,p()}}}function qe(n,e,t){let s=[];async function _(){t(0,s=[...s,{name:"New Section",pieces:[{type:"math",content:""}]}])}function d(l,o){l[o].name=this.value,t(0,s)}function u(l,o){l[o].content=this.value,t(0,s)}function p(l,o,a){M[l?"unshift":"push"](()=>{o[a].element=l,t(0,s)})}function c(l,o){n.$$.not_equal(o.content,l)&&(o.content=l,t(0,s))}return[s,_,d,u,p,c,async(l,o,a,r)=>{var h;t(0,o[a].pieces=[...l.pieces,{type:"math",content:""}],s),await j();const f=l.pieces[r+1];f.type=="math"&&((h=f.element)==null||h.focus())},async(l,o,a,r)=>{var h;if(l.pieces.length===1)return;t(0,a[r].pieces=l.pieces.filter((k,I)=>I!==o),s),await j();const f=l.pieces[o-1];f.type=="math"&&((h=f.element)==null||h.focus())}]}class we extends W{constructor(e){super(),X(this,e,qe,ve,Y,{})}}export{we as default};
